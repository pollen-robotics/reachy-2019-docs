<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Control The Head"><meta property="og:title" content="Control The Head"><meta property="og:description" content="Control the head The head is an important part of Reachy. It's where its camera are located and it participates a lot to the robot expressivity.
In the following sections, you will see how:
 you can orient the head by controlling its neck, to move the antennas, and use its cameras.  In the examples below, we will assume that you have already instantiated the head part of a Reachy as show in the section Instantiate Your Robot."><meta property="og:type" content="article"><meta property="og:url" content="https://pollen-robotics.github.io/reachy-2019-docs/docs/program-your-robot/control-the-head/"><title>Control The Head | Reachy manual</title><link rel=icon href=/reachy-2019-docs/favicon.png type=image/x-icon><link rel=stylesheet href=/reachy-2019-docs/book.min.b7fe34b8a4c4da05b2690b4aacfa71ddce0668cc6da3abb67dd3946844125444.css integrity="sha256-t/40uKTE2gWyaQtKrPpx3c4GaMxto6u2fdOUaEQSVEQ="><script defer src=/reachy-2019-docs/en.search.min.d4726a0516b761b82bdbbd710772eb757966988c8214a99bf49561afac20a0c2.js integrity="sha256-1HJqBRa3Ybgr271xB3LrdXlmmIyCFKmb9JVhr6wgoMI="></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-92714924-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body><input type=checkbox class=hidden id=menu-control><main class="container flex"><aside class=book-menu><nav><h2 class=book-brand><a href=/reachy-2019-docs><span>Reachy manual</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><a href=/reachy-2019-docs/docs/getting-started/>Getting Started</a><ul><li><a href=/reachy-2019-docs/docs/getting-started/install-your-robot/>Install your robot</a></li><li><a href=/reachy-2019-docs/docs/getting-started/connect-to-your-robot/>Connect to Your Robot</a></li><li><a href=/reachy-2019-docs/docs/getting-started/check-status/>Check the status of Reachy</a></li><li><a href=/reachy-2019-docs/docs/getting-started/faq/>FAQ</a></li></ul></li><li><a href=/reachy-2019-docs/docs/posts/safety/>Safety First</a></li><li><a href=/reachy-2019-docs/docs/technical-specifications/>Technical Specifications</a><ul><li><a href=/reachy-2019-docs/docs/technical-specifications/arm/>Arm</a></li><li><a href=/reachy-2019-docs/docs/technical-specifications/gripper/>Gripper</a></li><li><a href=/reachy-2019-docs/docs/technical-specifications/head/>Head</a></li><li><a href=/reachy-2019-docs/docs/technical-specifications/torso/>Torso</a></li></ul></li><li><a href=/reachy-2019-docs/docs/program-your-robot/>Program your robot</a><ul><li><a href=/reachy-2019-docs/docs/program-your-robot/instantiate-your-robot/>Instantiate Your Robot</a></li><li><a href=/reachy-2019-docs/docs/program-your-robot/control-the-arm/>Control The Arm</a></li><li><a href=/reachy-2019-docs/docs/program-your-robot/control-the-head/ class=active>Control The Head</a></li><li><a href=/reachy-2019-docs/docs/program-your-robot/pick-and-place/>Pick and Place</a></li><li><a href=/reachy-2019-docs/docs/program-your-robot/ai/>AI & Coral TPU</a></li><li><a href=/reachy-2019-docs/docs/program-your-robot/python-api/>Python's API</a></li></ul></li><li><a href=/reachy-2019-docs/docs/tictactoe/>TicTacToe Playground</a><ul><li><a href=/reachy-2019-docs/docs/tictactoe/setup-the-demo/>Setup The Demo</a></li><li><a href=/reachy-2019-docs/docs/tictactoe/playing-with-reachy/>Playing With Reachy</a></li><li><a href=/reachy-2019-docs/docs/tictactoe/train-your-own-detection/>Train Your Own Vision Detection</a></li></ul></li><li><a href=/reachy-2019-docs/docs/simulation/>Reachy simulation</a><ul><li><a href=/reachy-2019-docs/docs/simulation/create-your-own-scene/>Create your own virtual scene for Reachy</a></li></ul></li><li><span>Appendices</span><ul><li><a href=/reachy-2019-docs/docs/appendices/install-from-scratch-raspberry/>Install from Scratch on a Raspberry-Pi</a></li><li><a href=/reachy-2019-docs/docs/appendices/flash-luos-module/>Flash a Luos module</a></li></ul></li></ul></nav><script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/reachy-2019-docs/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Control The Head</strong>
<label for=toc-control><img src=/reachy-2019-docs/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><input type=checkbox class=hidden id=toc-control><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#homing>Homing</a></li><li><a href=#looking-around>Looking around</a><ul><li><a href=#controlling-the-disks-individually>Controlling the disks individually</a></li><li><a href=#look-at-specific-points-in-space>Look at specific points in space</a></li></ul></li><li><a href=#move-antennas>Move antennas</a></li><li><a href=#access-the-camera>Access the camera</a></li></ul></nav></aside></header><article class=markdown><h1 id=control-the-head>Control the head</h1><p>The head is an important part of Reachy. It's where its camera are located and it participates a lot to the robot expressivity.</p><img src=/reachy-docs/img/reachy-head.gif alt width=50%><p>In the following sections, you will see how:</p><ul><li>you can orient the head by controlling its neck,</li><li>to move the antennas,</li><li>and use its cameras.</li></ul><p>In the examples below, we will assume that you have already instantiated the head part of a Reachy as show in the section <a href=../instantiate-your-robot/>Instantiate Your Robot</a>.</p><h2 id=homing>Homing</h2><p>Before being able to control the head, there is a required calibration step. The position coders used in the Orbita neck only provides relative positionning. The calibration procedure will automatically find the zero position of the head for you.</p><p>This calibration, also called homing, is rather simple. All three disks composing orbita will turn in the same direction, making the head turn to the left until they reach their limit. We can used this left physical limits as a known absolute position (-160° for all three disks). We then go back to the zero position, meaning when the head is looking straight forward.</p><p>To do the homing:</p><ul><li>First, make sure the head can freely turn.</li><li>Then, run the following python line of code:</li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>reachy<span style=color:#f92672>.</span>head<span style=color:#f92672>.</span>homing()
</code></pre></div><p>You should see the head realises the motion described above and end up in its base position. The whole procedure takes about 5 seconds.</p><blockquote class="book-hint info">The head homing must be performed every time you start your robot after powering it off.</blockquote><h2 id=looking-around>Looking around</h2><p>Now that the head has been calibrated, we can start controlling it. We will show you two main ways to control the neck and orient the head:</p><ul><li>Moving each disks individually</li><li>Specifing look points in space.</li></ul><p>The neck has 3 degrees of freedom (one per disk). When combined those 3 rotations will allow you to set a 3D orientation of the head.</p><img src=/reachy-docs/img/orbita-schema.png alt width=50%><h3 id=controlling-the-disks-individually>Controlling the disks individually</h3><p>Each disk is actuated by a motor that can be controlled in almost the same way than motors from the arm. In particular, you will be able to:</p><ul><li>turn them stiff/compliant,</li><li>set a new target position,</li><li>define a maximum speed,</li><li>read their current position (in degrees),</li><li>get their current temperature (in °C).</li></ul><blockquote class="book-hint info">It's important to understand how you can control the disks of Reachy's head as it's always how they are control behind the scene. Yet, in the next section we will show you simpler way to control the head orientation and look at specific 3D points in space.</blockquote><h4 id=stiffcompliant>Stiff/Compliant</h4><p>Like for the motors of the arm, the head can be used in two different modes:</p><ul><li>compliant: where you can freely move the head and still read its current position</li><li>stiff: where the motors are hard and can be controlled in position.</li></ul><p>You can change the mode for a disk by running:</p><p>To make it compliant:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>reachy<span style=color:#f92672>.</span>head<span style=color:#f92672>.</span>neck<span style=color:#f92672>.</span>disk_bottom<span style=color:#f92672>.</span>compliant <span style=color:#f92672>=</span> True
</code></pre></div><p>To make it stiff:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>reachy<span style=color:#f92672>.</span>head<span style=color:#f92672>.</span>neck<span style=color:#f92672>.</span>disk_bottom<span style=color:#f92672>.</span>compliant <span style=color:#f92672>=</span> False
</code></pre></div><p>You can also change the mode for the three disks using:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#66d9ef>for</span> disk <span style=color:#f92672>in</span> reachy<span style=color:#f92672>.</span>head<span style=color:#f92672>.</span>neck<span style=color:#f92672>.</span>disks:
    disk<span style=color:#f92672>.</span>compliant <span style=color:#f92672>=</span> True
</code></pre></div><p>Or you can even use the shortcut:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>reachy<span style=color:#f92672>.</span>head<span style=color:#f92672>.</span>compliant <span style=color:#f92672>=</span> False
</code></pre></div><h4 id=control-a-disk>Control a disk</h4><p>Like the motors of the arm, you can control the disk of the neck by setting new target position. You can also set maximum speed that will be used to reach those targets.</p><p>You can set a new target position of one disk using:</p><p>To set the disk_top to 20°:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>reachy<span style=color:#f92672>.</span>head<span style=color:#f92672>.</span>neck<span style=color:#f92672>.</span>disk_top<span style=color:#f92672>.</span>target_rot_position <span style=color:#f92672>=</span> <span style=color:#ae81ff>20</span>
</code></pre></div><p>If the head was stiff, you should have seen of the arm move.</p><p>To move all three disks at the same time you can run:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#66d9ef>for</span> disk <span style=color:#f92672>in</span> reachy<span style=color:#f92672>.</span>head<span style=color:#f92672>.</span>neck<span style=color:#f92672>.</span>disks:
    disk<span style=color:#f92672>.</span>target_rot_position <span style=color:#f92672>=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>20</span>
</code></pre></div><p>We also provide a goto function that lets you control the move duration as well. For instance to go back to 0 position on all three disks in 1 second:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>reachy<span style=color:#f92672>.</span>head<span style=color:#f92672>.</span>neck<span style=color:#f92672>.</span>goto(thetas<span style=color:#f92672>=</span>(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>), duration<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span>, wait<span style=color:#f92672>=</span>True)
</code></pre></div><p>The goto method supports the same extra arguments than for the arm version:</p><ul><li>wait (True/False): whether or not to wait for the end of the move</li><li>interpolation_mode: to specify how the trajectory is computed (see <a href=../control-the-arm/#different-trajectory-interpolation>Trajectory interpolation</a> for details).</li></ul><h4 id=read-positions-or-temperature>Read positions or temperature</h4><p>The current position of each disk can be retrieved via:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#66d9ef>for</span> disk <span style=color:#f92672>in</span> reachy<span style=color:#f92672>.</span>head<span style=color:#f92672>.</span>neck<span style=color:#f92672>.</span>disks:
    <span style=color:#66d9ef>print</span>(disk<span style=color:#f92672>.</span>rot_position)
</code></pre></div><p>Similarly to access the temperature:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#66d9ef>for</span> disk <span style=color:#f92672>in</span> reachy<span style=color:#f92672>.</span>head<span style=color:#f92672>.</span>neck<span style=color:#f92672>.</span>disks:
    <span style=color:#66d9ef>print</span>(disk<span style=color:#f92672>.</span>temperature)
</code></pre></div><p>The position are updated at about 100Hz while the temperature is updated at ~1Hz. The temperature is also used internally to trigger the fan inside the Orbita neck.</p><h3 id=look-at-specific-points-in-space>Look at specific points in space</h3><h2 id=move-antennas>Move antennas</h2><h2 id=access-the-camera>Access the camera</h2></article><footer class=book-footer><div class="flex justify-between"><div><a class="flex align-center" href=https://github.com/pollen-robotics/reachy-2019-docs/edit/master/content/docs/program-your-robot/control-the-head.md target=_blank rel=noopener><img src=/reachy-2019-docs/svg/edit.svg class=book-icon alt=Edit>
<span>Edit this page</span></a></div></div><div class=book-comments></div></footer></div><aside class=book-toc><nav id=TableOfContents><ul><li><a href=#homing>Homing</a></li><li><a href=#looking-around>Looking around</a><ul><li><a href=#controlling-the-disks-individually>Controlling the disks individually</a></li><li><a href=#look-at-specific-points-in-space>Look at specific points in space</a></li></ul></li><li><a href=#move-antennas>Move antennas</a></li><li><a href=#access-the-camera>Access the camera</a></li></ul></nav></aside></main></body></html>